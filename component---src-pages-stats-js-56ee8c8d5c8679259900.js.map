{"version":3,"file":"component---src-pages-stats-js-56ee8c8d5c8679259900.js","mappings":"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","sources":["webpack://sponsorblock/./src/pages/stats.js","webpack://sponsorblock/./src/components/layout.js","webpack://sponsorblock/./node_modules/classnames/index.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport classNames from \"classnames\";\n\nimport Layout from \"../components/layout\";\nimport Seo from \"../components/seo\";\n\nconst API_BASE = \"https://sponsor.ajay.app\";\nlet endpoint = \"/api/getTopBrandingUsers?\";\nlet sortType = 0;\n\nconst IndexPage = () => {\n    const [totalStats, setTotalStats] = useState({\n        activeUsers: \"Loading\",\n        titles: \"Loading\",\n        thumbnails: \"Loading\",\n    });\n\n    const [topUsers, setTopUsers] = useState([]);\n    const [isTotalStatsLoading, setIsTotalStatsLoading] = useState(true);\n\n    function setTopUserData(clickedElement) {\n        const url = new URL(`${API_BASE}${endpoint}`);\n        url.searchParams.append(\"sortType\", sortType);\n        return fetch(url)\n            .then((response) => {\n                if (response.ok) return response.json()\n                else return Promise.reject(response)\n            })\n            .then((resultData) => {\n                if (clickedElement) {\n                    [...document.getElementsByClassName(\"sorted\")].forEach(\n                        (el) => el.classList.remove(\"sorted\")\n                    );\n                    clickedElement.classList.add(\"sorted\");\n                    clickedElement.classList.remove(\"sort-loading\");\n                }\n\n                setTopUsers(resultData);\n            })\n            .catch((r) => console.error(r));\n    }\n\n    useEffect(() => {\n        fetch(API_BASE + \"/api/brandingStats\")\n            .then((response) => {\n                if (response.ok) return response.json()\n                else return Promise.reject(response)\n            })\n            .then((resultData) => {\n                setIsTotalStatsLoading(false);\n                setTotalStats(resultData);\n            })\n            .catch((r) => console.error(r));\n        setTopUserData();\n    }, []);\n\n    return (\n        <Layout>\n            <Seo title=\"Stats\" />\n\n            <div className=\"container\">\n                <h2 className=\"text-center\">Overall Stats</h2>\n\n                <table>\n                    <tbody>\n                        <tr>\n                            <td>Active Users:</td>\n                            <td\n                                className={\n                                    isTotalStatsLoading ? \"loading\" : null\n                                }\n                            >\n                                {totalStats.activeUsers.toLocaleString()} users\n                            </td>\n                        </tr>\n                        <tr>\n                            <td>Titles Submitted:</td>\n                            <td\n                                className={\n                                    isTotalStatsLoading ? \"loading\" : null\n                                }\n                            >\n                                {totalStats.titles.toLocaleString()}{\" \"}\n                                submissions\n                            </td>\n                        </tr>\n                        <tr>\n                            <td>Thumbnails Submitted:</td>\n                            <td\n                                className={\n                                    isTotalStatsLoading ? \"loading\" : null\n                                }\n                            >\n                                {totalStats.thumbnails.toLocaleString()}{\" \"}\n                                submissions\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n\n                <div>\n                    <h2 className=\"text-center no-bottom-margin\">\n                        Top Contributors\n                    </h2>\n\n                    <div className=\"text-center text-small\">\n                        Click a column title to change the sort\n                    </div>\n                </div>\n            </div>\n\n            <div className=\"container-fluid stats-table\">\n                <table className=\"highlight-row-on-hover\">\n                    <thead>\n                        <tr>\n                            <th className=\"rank\">Rank</th>\n                            <th>User Name</th>\n                            <th\n                                className=\"pointer sorted\"\n                                onClick={(e) => {\n                                    if (e.target.classList.contains(\"sorted\"))\n                                        return;\n                                    e.target.classList.add(\"sort-loading\");\n                                    sortType = 0;\n                                    setTopUserData(e.target);\n                                }}\n                            >\n                                Titles\n                            </th>\n                            <th\n                                className=\"pointer\"\n                                onClick={(e) => {\n                                    if (e.target.classList.contains(\"sorted\"))\n                                        return;\n                                    e.target.classList.add(\"sort-loading\");\n                                    sortType = 1;\n                                    setTopUserData(e.target);\n                                }}\n                            >\n                                Thumbnails\n                            </th>\n                        </tr>\n                    </thead>\n\n                    <tbody>\n                        {topUsers.length === 0 ? (\n                            <tr className={\"row--even\"}>\n                                <td className=\"topUsersLoading\" colSpan=\"5\">\n                                    Loading...\n                                </td>\n                            </tr>\n                        ) : (\n                            topUsers.map((value, index) => (\n                                <tr\n                                    className={`row--${\n                                        index % 2 ? \"odd\" : \"even\"\n                                    }`}\n                                    key={index}\n                                >\n                                    <td className=\"rank celltype-number\">\n                                        {index + 1}.\n                                    </td>\n                                    <td>{value.userName}</td>\n                                    <td className=\"celltype-number\">\n                                        {value.titles.toLocaleString()}\n                                    </td>\n                                    <td className=\"celltype-number\">\n                                        {value.thumbnails}\n                                    </td>\n                                </tr>\n                            ))\n                        )}\n                    </tbody>\n                </table>\n            </div>\n        </Layout>\n    );\n};\n\nexport default IndexPage;\n","/**\n * Layout of the main website.\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Link } from \"gatsby\";\n\nimport \"normalize.css/normalize.css\";\nimport \"./layout.scss\";\nimport \"fork-awesome/css/fork-awesome.min.css\";\n\nconst Layout = ({ children }) => {\n    return (\n        <>\n            <div\n                style={{\n                    backgroundColor: \"#262626\",\n                    display: \"flex\",\n                    justifyContent: \"space-between\",\n                    borderBottom: \"1px #1c1c1c solid\",\n                }}\n            >\n                <ul className=\"nav\">\n                    <li>\n                        <Link\n                            to=\"/\"\n                            className=\"nav-link\"\n                            style={{ padding: \"0.7rem 1.5rem\" }}\n                        >\n                            <img\n                                src=\"/logo.svg\"\n                                alt=\"Home\"\n                                style={{\n                                    height: \"2.1rem\",\n                                    verticalAlign: \"middle\",\n                                }}\n                            />\n                        </Link>\n                    </li>\n\n                    <li>\n                        <Link to=\"/\" className=\"nav-link\">\n                            Home\n                        </Link>\n                    </li>\n\n                    <li>\n                        <Link to=\"/about\" className=\"nav-link\">\n                            About\n                        </Link>\n                    </li>\n\n                    <li>\n                        <Link to=\"/stats\" className=\"nav-link\">\n                            Stats\n                        </Link>\n                    </li>\n\n                    <li>\n                        <a\n                            href=\"https://sponsor.ajay.app/news\"\n                            className=\"nav-link\"\n                        >\n                            Blog\n                        </a>\n                    </li>\n\n                    <li>\n                        <a\n                            href=\"https://wiki.sponsor.ajay.app/w/DeArrow/Guidelines\"\n                            className=\"nav-link\"\n                        >\n                            Guidelines\n                        </a>\n                    </li>\n\n                    <li>\n                        <a\n                            href=\"https://wiki.sponsor.ajay.app/w/API_Docs/DeArrow\"\n                            className=\"nav-link\"\n                        >\n                            API\n                        </a>\n                    </li>\n                </ul>\n\n                <ul className=\"nav\">\n                    <li className=\"author\">\n                        <a\n                            href=\"https://ajay.app/\"\n                            className=\"nav-link text-small profile\"\n                        >\n                            Created by Ajay Ramachandran\n                            <img\n                                src=\"/ajay_profile.jpg\"\n                                alt=\"Ajay's avatar\"\n                            ></img>\n                        </a>\n                    </li>\n\n                    <li>\n                        <a\n                            href=\"https://discord.gg/SponsorBlock\"\n                            className=\"nav-link\"\n                            title=\"Discord Invite\"\n                        >\n                            <i className=\"fa fa-discord\"></i>\n                        </a>\n                    </li>\n\n                    <li>\n                        <a\n                            href=\"https://matrix.to/#/#sponsor:ajay.app?via=ajay.app&via=matrix.org&via=mozilla.org\"\n                            className=\"nav-link\"\n                            title=\"Matrix Invite\"\n                        >\n                            <i className=\"fa fa-matrix-org\"></i>\n                        </a>\n                    </li>\n\n                    <li>\n                        <a\n                            href=\"https://fosstodon.org/@sponsorblock\"\n                            className=\"nav-link\"\n                            rel=\"me\"\n                        >\n                            <i className=\"fa fa-mastodon\"></i>\n                        </a>\n                    </li>\n\n                    <li>\n                        <a\n                            href=\"https://twitter.com/SponsorBlock\"\n                            className=\"nav-link\"\n                        >\n                            <i className=\"fa fa-twitter\"></i>\n                        </a>\n                    </li>\n\n                    <li>\n                        <a\n                            href=\"https://github.com/ajayyy/DeArrow\"\n                            className=\"nav-link\"\n                        >\n                            <i className=\"fa fa-github\"></i>\n                        </a>\n                    </li>\n                </ul>\n            </div>\n            <main>{children}</main>\n        </>\n    );\n};\n\nLayout.propTypes = {\n    children: PropTypes.node.isRequired,\n};\n\nexport default Layout;\n","/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = '';\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (arg) {\n\t\t\t\tclasses = appendClass(classes, parseValue(arg));\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction parseValue (arg) {\n\t\tif (typeof arg === 'string' || typeof arg === 'number') {\n\t\t\treturn arg;\n\t\t}\n\n\t\tif (typeof arg !== 'object') {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (Array.isArray(arg)) {\n\t\t\treturn classNames.apply(null, arg);\n\t\t}\n\n\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\treturn arg.toString();\n\t\t}\n\n\t\tvar classes = '';\n\n\t\tfor (var key in arg) {\n\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\tclasses = appendClass(classes, key);\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction appendClass (value, newClass) {\n\t\tif (!newClass) {\n\t\t\treturn value;\n\t\t}\n\t\n\t\tif (value) {\n\t\t\treturn value + ' ' + newClass;\n\t\t}\n\t\n\t\treturn value + newClass;\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n"],"names":["API_BASE","sortType","IndexPage","totalStats","setTotalStats","useState","activeUsers","titles","thumbnails","topUsers","setTopUsers","isTotalStatsLoading","setIsTotalStatsLoading","setTopUserData","clickedElement","url","URL","searchParams","append","fetch","then","response","ok","json","Promise","reject","resultData","_toConsumableArray","document","getElementsByClassName","forEach","el","classList","remove","add","catch","r","console","error","useEffect","React","Layout","Seo","title","className","toLocaleString","onClick","e","target","contains","length","colSpan","map","value","index","key","userName","_ref","children","style","backgroundColor","display","justifyContent","borderBottom","Link","to","padding","src","alt","height","verticalAlign","href","rel","hasOwn","hasOwnProperty","classNames","classes","i","arguments","arg","appendClass","parseValue","Array","isArray","apply","toString","Object","prototype","includes","call","newClass","module","exports","default"],"sourceRoot":""}